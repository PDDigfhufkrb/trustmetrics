<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShadowBoost ‚Äî –û–ø–ª–∞—Ç–∞</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–ø–ª–∞—Ç—ã */
        .payment-page {
            padding: 40px 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .tariff-options {
            display: grid;
            gap: 20px;
            margin: 30px 0;
        }
        
        .tariff-card {
            background: rgba(30, 30, 46, 0.7);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tariff-card:hover {
            border-color: #3b82f6;
            transform: translateY(-5px);
        }
        
        .tariff-card.selected {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }
        
        .tariff-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .tariff-name {
            font-size: 20px;
            font-weight: 600;
        }
        
        .tariff-price {
            font-size: 28px;
            font-weight: 700;
            color: #3b82f6;
        }
        
        .tariff-features {
            list-style: none;
            margin: 15px 0;
            padding: 0;
        }
        
        .tariff-features li {
            padding: 5px 0;
            color: #a0a0b0;
            font-size: 14px;
        }
        
        .payment-form {
            margin-top: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #a0a0b0;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
        }
        
        .payment-methods {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
            justify-content: center;
        }
        
        .payment-method {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            color: #a0a0b0;
        }
        
        .btn-pay {
            width: 100%;
            padding: 16px;
            font-size: 18px;
            margin-top: 20px;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="navbar">
            <div class="nav-content">
                <a href="index.html" class="logo">ShadowBoost</a>
                <div class="nav-links">
                    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="login.html">–í–æ–π—Ç–∏</a>
                </div>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="payment-page">
            <h1 class="page-title">–û–ø–ª–∞—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞</h1>
            <p class="page-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ –∏ —É–∫–∞–∂–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞</p>
            
            <div id="message" class="message"></div>
            
            <!-- –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ -->
            <div class="tariff-options">
                <!-- –ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ -->
                <div class="tariff-card" data-tariff="basic" data-price="2000" data-visits="1500">
                    <div class="tariff-header">
                        <div class="tariff-name">–ë–∞–∑–æ–≤—ã–π</div>
                        <div class="tariff-price">2 000 ‚ÇΩ</div>
                    </div>
                    <ul class="tariff-features">
                        <li>‚úì 1 500 –≤–∏–∑–∏—Ç–æ–≤ –≤ –º–µ—Å—è—Ü</li>
                        <li>‚úì –†–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–∏–µ IP –†–æ—Å—Å–∏–∏/–°–ù–ì</li>
                        <li>‚úì –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è</li>
                        <li>‚úì –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫</li>
                    </ul>
                </div>
                
                <!-- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ -->
                <div class="tariff-card selected" data-tariff="optimal" data-price="5000" data-visits="4000">
                    <div class="tariff-header">
                        <div class="tariff-name">–û–ø—Ç–∏–º–∞</div>
                        <div class="tariff-price">5 000 ‚ÇΩ</div>
                    </div>
                    <ul class="tariff-features">
                        <li>‚úì 4 000 –≤–∏–∑–∏—Ç–æ–≤ –≤ –º–µ—Å—è—Ü</li>
                        <li>‚úì –†–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–∏–µ IP –†–æ—Å—Å–∏–∏/–°–ù–ì</li>
                        <li>‚úì –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è</li>
                        <li>‚úì –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</li>
                    </ul>
                </div>
                
                <!-- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ -->
                <div class="tariff-card" data-tariff="pro" data-price="10000" data-visits="8000">
                    <div class="tariff-header">
                        <div class="tariff-name">–ü—Ä–æ—Ñ–∏</div>
                        <div class="tariff-price">10 000 ‚ÇΩ</div>
                    </div>
                    <ul class="tariff-features">
                        <li>‚úì 8 000 –≤–∏–∑–∏—Ç–æ–≤ –≤ –º–µ—Å—è—Ü</li>
                        <li>‚úì –†–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–∏–µ IP –†–æ—Å—Å–∏–∏/–°–ù–ì</li>
                        <li>‚úì –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è</li>
                        <li>‚úì –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</li>
                    </ul>
                </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã -->
            <div class="payment-form">
                <form id="paymentForm">
                    <div class="form-group">
                        <label for="email" class="form-label">Email –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ *</label>
                        <input type="email" id="email" class="form-input" placeholder="–≤–∞—à@email.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="site_url" class="form-label">URL –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ *</label>
                        <input type="url" id="site_url" class="form-input" placeholder="https://–≤–∞—à-—Å–∞–π—Ç.ru" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="yandex_id" class="form-label">ID –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ *</label>
                        <input type="text" id="yandex_id" class="form-input" placeholder="12345678" required>
                        <small style="color: #a0a0b0; font-size: 12px; display: block; margin-top: 5px;">
                            –ù–æ–º–µ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –∏–∑ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
                        </small>
                    </div>
                    
                    <!-- –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã -->
                    <div class="payment-methods">
                        <span class="payment-method">üí≥ –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</span>
                        <span class="payment-method">ü§ù –°–ë–ü</span>
                        <span class="payment-method">üëõ –ÆMoney</span>
                        <span class="payment-method">üì± QIWI</span>
                        <span class="payment-method">üè¶ WebMoney</span>
                    </div>
                    
                    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
                    <div id="loading" class="loading">
                        <div class="loading-spinner"></div>
                        <p>–°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂...</p>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã -->
                    <button type="submit" class="btn btn-primary btn-pay" id="payButton">
                        üöÄ –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ
                    </button>
                    
                    <p style="text-align: center; color: #666; font-size: 12px; margin-top: 20px;">
                        –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥
                    </p>
                </form>
            </div>
        </div>
    </div>

    <script>
        // =================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ===================
        const API_URL = 'https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/api/payment.php'; // –ó–ê–ú–ï–ù–ò–¢–ï –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
        const SUCCESS_URL = 'https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/success.html'; // –ó–ê–ú–ï–ù–ò–¢–ï
        
        // =================== –í–´–ë–û–† –¢–ê–†–ò–§–ê ===================
        document.querySelectorAll('.tariff-card').forEach(card => {
            card.addEventListener('click', function() {
                // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
                document.querySelectorAll('.tariff-card').forEach(c => {
                    c.classList.remove('selected');
                });
                // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
                this.classList.add('selected');
            });
        });
        
        // =================== –§–û–†–ú–ê –û–ü–õ–ê–¢–´ ===================
        document.getElementById('paymentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
            const email = document.getElementById('email').value.trim();
            const siteUrl = document.getElementById('site_url').value.trim();
            const yandexId = document.getElementById('yandex_id').value.trim();
            
            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∞—Ä–∏—Ñ
            const selectedTariff = document.querySelector('.tariff-card.selected');
            const tariff = selectedTariff.dataset.tariff;
            const price = parseInt(selectedTariff.dataset.price);
            const visits = parseInt(selectedTariff.dataset.visits);
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!email || !siteUrl || !yandexId) {
                showMessage('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            if (!email.includes('@')) {
                showMessage('‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email', 'error');
                return;
            }
            
            if (!siteUrl.startsWith('http')) {
                showMessage('‚ùå URL –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å http:// –∏–ª–∏ https://', 'error');
                return;
            }
            
            if (!/^\d+$/.test(yandexId)) {
                showMessage('‚ùå ID –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã', 'error');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            document.getElementById('loading').style.display = 'block';
            document.getElementById('payButton').disabled = true;
            
            try {
                // 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ª–æ–∫–∞–ª—å–Ω–æ
                const userData = {
                    email: email,
                    siteUrl: siteUrl,
                    yandexId: yandexId,
                    tariff: tariff,
                    visits: visits,
                    price: price,
                    registered: new Date().toISOString()
                };
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('shadowboost_user', JSON.stringify(userData));
                
                // 2. –°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂ –≤ –ÆKassa —á–µ—Ä–µ–∑ –Ω–∞—à API
                const response = await createPayment(tariff, price, email);
                
                if (response.confirmation_url) {
                    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã –ÆKassa
                    window.location.href = response.confirmation_url;
                } else {
                    throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂');
                }
                
            } catch (error) {
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                document.getElementById('loading').style.display = 'none';
                document.getElementById('payButton').disabled = false;
            }
        });
        
        // =================== –§–£–ù–ö–¶–ò–ò ===================
        
        /**
         * –°–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ –≤ –ÆKassa
         * @param {string} tariff - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞
         * @param {number} amount - –°—É–º–º–∞ –≤ —Ä—É–±–ª—è—Ö
         * @param {string} email - Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         */
        async function createPayment(tariff, amount, email) {
            // –í–ù–ò–ú–ê–ù–ò–ï: –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä!
            // –ó–¥–µ—Å—å –ø—Ä–∏–º–µ—Ä –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
            
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    amount: amount,
                    tariff: tariff,
                    email: email,
                    return_url: SUCCESS_URL
                })
            });
            
            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
            }
            
            return await response.json();
        }
        
        /**
         * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
         * @param {string} text - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
         * @param {string} type - –¢–∏–ø (success/error/info)
         */
        function showMessage(text, type = 'info') {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 5000);
        }
        
        // =================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===================
        document.addEventListener('DOMContentLoaded', function() {
            // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ email –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è
            const savedUser = localStorage.getItem('shadowboost_user');
            if (savedUser) {
                const user = JSON.parse(savedUser);
                document.getElementById('email').value = user.email || '';
                document.getElementById('site_url').value = user.siteUrl || '';
                document.getElementById('yandex_id').value = user.yandexId || '';
            }
            
            // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–º –ø–æ–ª–µ
            document.getElementById('email').focus();
        });
    </script>
</body>
</html>
